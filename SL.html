<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多空命令產生器</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>多空命令產生器</h2>
        <form id="mainForm">
            <div class="form-group">
                <label for="long">作多</label>
                <select class="form-control" id="long">
                    <option value="BTC" selected>BTC</option>
                    <option value="ETH">ETH</option>
                    <option value="ETC">ETC</option>
                    <option value="ATOM">ATOM</option>
                    <option value="MATIC">MATIC</option>
                    <option value="ADA">ADA</option>
                    <option value="AVAX">AVAX</option>
                    <option value="DOT">DOT</option>
                    <option value="BNB">BNB</option>
                    <option value="SOL">SOL</option>
                    <option value="XRP">XRP</option>
                    <option value="LTC">LTC</option>
                </select>
            </div>
            <div class="form-group">
                <label for="short">作空</label>
                <select class="form-control" id="short">
                    <option value="BTC">BTC</option>
                    <option value="ETH" selected>ETH</option>
                    <option value="ETC">ETC</option>
                    <option value="ATOM">ATOM</option>
                    <option value="MATIC">MATIC</option>
                    <option value="ADA">ADA</option>
                    <option value="AVAX">AVAX</option>
                    <option value="DOT">DOT</option>
                    <option value="BNB">BNB</option>
                    <option value="SOL">SOL</option>
                    <option value="XRP">XRP</option>
                    <option value="LTC">LTC</option>
                </select>
            </div>
            <div class="form-group">
                <label for="R">R</label>
                <input type="text" class="form-control" id="R" placeholder="輸入1R幾U">
            </div>
            <div class="form-group">
                <label for="SL">SL</label>
                <input type="text" class="form-control" id="SL" placeholder="輸入SL的%, 例:若停損為1.5%, 輸入1.5">
            </div>
            <div class="form-group">
                <label for="TP">TP</label>
                <input type="text" class="form-control" id="TP" placeholder="輸入TP的%, 例:若停利為4.5%, 輸入4.5">
            </div>
            <div class="form-group">
                <label for="TP">槓桿倍數</label>
                <input type="text" class="form-control" id="Leverage" placeholder="輸入槓桿倍數">
            </div>
            <div class="form-group">
                <label for="nohup">是否使用nohup</label>
                <input type="checkbox" id="nohup" value="true">
            </div>
            <button type="button" class="btn btn-primary" onclick="concatenateAndCopy()">產生命令</button>
        </form>
        <div class="form-group mt-3">
            <label for="result">產生執行指令</label>
            <input type="text" class="form-control" id="result" readonly>
        </div>
    </div>

    <script>
        function concatenateAndCopy() {
            const long = document.getElementById('long').value;
            const short = document.getElementById('short').value;
            const R = document.getElementById('R').value;
            const SL = document.getElementById('SL').value;
            const TP = document.getElementById('TP').value;
            const nohup = document.getElementById('nohup').checked;
            const Leverage = document.getElementById('Leverage').value;

            if (long === short) {
                alert('作多與作空標的不可相同');
                return;
            }
            
            if (R === '' || SL === '' || TP === '' || Leverage === '') {
                alert('請輸入R, SL, TP, 槓桿倍數');
                return;
            }

            if (isNaN(R) || isNaN(SL) || isNaN(TP) || isNaN(Leverage)) {
                alert('R, SL, TP, 槓桿倍數必須為數字');
                return;
            }

            if (nohup) {
                const result = `nohup python3 SL.py -long ${long} -short ${short} -R ${R} -SL ${SL} -TP ${TP} -L ${Leverage} &`;
                const resultInput = document.getElementById('result');
                resultInput.value = result;

                // Copy to clipboard
                resultInput.select();
                document.execCommand('copy');
                return;
            } else {
                const result = `python3 SL.py -long ${long} -short ${short} -R ${R} -SL ${SL} -TP ${TP} -L ${Leverage}`;
                const resultInput = document.getElementById('result');
                resultInput.value = result;

                // Copy to clipboard
                resultInput.select();
                document.execCommand('copy');
                return;
            }
        }
    </script>
</body>
</html>